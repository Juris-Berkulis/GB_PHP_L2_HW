# GB PHP L2 HW

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Composer —Å–∫—Ä–∏–ø—Ç–∞–º

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### üß™ `test`
**–ö–æ–º–∞–Ω–¥–∞:** `composer test`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤  
**–í—ã–≤–æ–¥:** –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ç–µ—Å—Ç–æ–≤  
**–§–ª–∞–≥–∏:**
- `--testdox` - –ß–∏—Ç–∞–µ–º—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- `--colors=always` - –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### üìä `test-mode-coverage`
**–ö–æ–º–∞–Ω–¥–∞:** `composer test-mode-coverage`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –≤—ã–≤–æ–¥–æ–º —Å–≤–æ–¥–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å  
**–í—ã–≤–æ–¥:** –¢–µ–∫—Å—Ç–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Xdebug —Å —Ä–µ–∂–∏–º–æ–º coverage  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üåê `test-mode-coverage-html`
**–ö–æ–º–∞–Ω–¥–∞:** `composer test-mode-coverage-html`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ HTML –æ—Ç—á—ë—Ç–∞ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏  
**–í—ã–≤–æ–¥:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ HTML —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `coverage_report/`  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Xdebug —Å —Ä–µ–∂–∏–º–æ–º coverage  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### üìã `test-mode-coverage-clover`
**–ö–æ–º–∞–Ω–¥–∞:** `composer test-mode-coverage-clover`  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML –æ—Ç—á—ë—Ç–∞ –¥–ª—è CI/CD —Å–∏—Å—Ç–µ–º  
**–í—ã–≤–æ–¥:** –§–∞–π–ª `coverage_report.xml` –≤ —Ñ–æ—Ä–º–∞—Ç–µ Clover  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Xdebug —Å —Ä–µ–∂–∏–º–æ–º coverage  
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jenkins, GitLab CI –∏ –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
composer test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
composer test-mode-coverage

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ HTML –æ—Ç—á—ë—Ç–∞
composer test-mode-coverage-html
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å: coverage_report/index.html

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML –¥–ª—è CI —Å–∏—Å—Ç–µ–º
composer test-mode-coverage-clover
```

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –∏ –æ—Ç–ª–∞–¥–∫–µ

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
php -S localhost:80 http_api.php
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:80`

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–û—Ç–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è api-–∑–∞–ø—Ä–æ—Å–æ–≤:**

`Tools ‚Üí HTTP Client ‚Üí Create Request in HTTP Client`

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ú–µ—Ç–æ–¥:** POST

**URL:** `http://localhost:80/login`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "user",
  "password": "pass"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`username` (string) - username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

`password` (string) - –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä:**

```http
POST http://localhost:80/login
Content-Type: application/json

{
    "username": "user4",
    "password": "pass1"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ username

**–ú–µ—Ç–æ–¥:** GET

**URL:** `http://localhost:80/users/show?username={username}`

**–ü—Ä–∏–º–µ—Ä:**
```http
GET http://localhost:80/users/show?username=ivan
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏

**–ú–µ—Ç–æ–¥:** POST

**URL:** `http://localhost:80/posts/create`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Content-Type: application/json

Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "text": "some text",
    "title": "some title"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`text` (string) - –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏

`title` (string) - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏

**–ü—Ä–∏–º–µ—Ä:**

```http
POST http://localhost:80/posts/create
Content-Type: application/json
Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3

{
    "text": "some text",
    "title": "some title"
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏

**–ú–µ—Ç–æ–¥:** DELETE

**URL:** `http://localhost:80/posts?uuid={uuid}`

**–ü—Ä–∏–º–µ—Ä:**
```http
DELETE http://localhost:80/posts?uuid=c9ccaec2-88b4-41cd-b092-9d64ce9d478a
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

**–ú–µ—Ç–æ–¥:** POST

**URL:** `http://localhost:80/posts/comment`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Content-Type: application/json

Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "post_uuid": "6a248a05-d352-4c0b-96e9-4a205a61a6a9",
    "text": "some text"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`post_uuid` (string) - UUID —Å—Ç–∞—Ç—å–∏

`text` (string) - –¢–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

**–ü—Ä–∏–º–µ—Ä:**

```http
POST http://localhost:80/posts/comment
Content-Type: application/json
Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3

{
    "post_uuid": "6a248a05-d352-4c0b-96e9-4a205a61a6a9",
    "text": "some text"
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∞–π–∫–∞ —Å—Ç–∞—Ç—å–µ

**–ú–µ—Ç–æ–¥:** POST

**URL:** `http://localhost:80/like/post`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Content-Type: application/json

Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "post_uuid": "6a248a05-d352-4c0b-96e9-4a205a61a6a9"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`post_uuid` (string) - UUID —Å—Ç–∞—Ç—å–∏, –∫–æ—Ç–æ—Ä–æ–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ª–∞–π–∫

**–ü—Ä–∏–º–µ—Ä:**

```http
POST http://localhost:80/like/post
Content-Type: application/json
Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3

{
    "post_uuid": "6a248a05-d352-4c0b-96e9-4a205a61a6a9"
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∞–π–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—é

**–ú–µ—Ç–æ–¥:** POST

**URL:** `http://localhost:80/like/comment`

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```http
Content-Type: application/json

Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "comment_uuid": "eefb7270-1c8c-49d5-9c69-421584ee61ca"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

`comment_uuid` (string) - UUID –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è, –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ª–∞–π–∫

**–ü—Ä–∏–º–µ—Ä:**

```http
POST http://localhost:80/like/comment
Content-Type: application/json
Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3

{
    "comment_uuid": "51088f54-4f61-439e-bab5-5815ab62b728"
}
```

## –û—Ç–ª–∞–¥–∫–∞ —Å Xdebug

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –∑–∞–ø—Ä–æ—Å:

```http
Cookie: XDEBUG_SESSION=start
```

–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –æ—Ç–ª–∞–¥–∫–æ–π:
```http
POST http://localhost:80/posts/create
Content-Type: application/json
Authorization: Bearer 0f36a75f28e2811b4a5d8d15f8ac1b61f7e4edbe4b4135cf6f71fa784d4d4ee3b6a8bb4c51fca4d3
Cookie: XDEBUG_SESSION=start

{
    "text": "some text",
    "title": "some title"
}
```
